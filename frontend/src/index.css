/* Zentrales Stylesheet für alle globalen Teletext-/Tailwind-Styles der Schwimm-App.
   Wird in main.tsx importiert und kombiniert Custom Tokens, Tailwind-Layer sowie Fonts. */
@import "./styles/base/tokens.css";
@import "tailwindcss";
@import "./styles/base/teletext.css";

/* === Font: Teletext ===
   Datei unter: /src/assets/fonts/EuropeanTeletextNuevo.woff2
*/
@font-face {
  font-family: "EuropeanTeletextNuevo";
  src: url("/src/assets/fonts/EuropeanTeletextNuevo.woff2") format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

/* === Farbtokens ===
   Exakte HEX-Werte aus Figma nutzen, damit UI und Figma identisch bleiben.
*/
html, body, #root { height: 100%; }

:root {
  --bubble-rise-start: 26dvh;
  --bubble-rise-end: -220dvh;
  --bubble-start-bottom: 0dvh;
  --bubble-rise-start-scale: 0.96;
  --bubble-rise-end-scale: 1.1;
}

@media (max-width: 640px) {
  :root {
    --bubble-rise-start: 22dvh;
    --bubble-rise-end: -200dvh;
    --bubble-start-bottom: 0dvh;
    --bubble-rise-start-scale: 0.94;
    --bubble-rise-end-scale: 1.08;
  }
}

body {
  background: var(--tt-bg);
  color: var(--tt-text);
  font-family: var(--tt-font-family);
}

/* Teletext-typische Typo-Optik */
.tt-text { letter-spacing: 0.02em; }

/* Kachelrahmen (Logo) */
.tt-tile {
  background: var(--tt-white);
  color: #111;
  border: 4px solid #000;
  box-shadow: 0 0 0 2px #fff inset;
}

/* Inputs: Platzhalter dezent, Caret in Blau */
input::placeholder { color: color-mix(in oklab, var(--tt-blue) 55%, #5a5a5a); opacity: 1; }
input { caret-color: var(--tt-blue); }

/* === Login Intro Overlay === */
.tt-loading-overlay {
  position: fixed;
  inset: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100vh;
  height: 100dvh;
  box-sizing: border-box;
  padding: calc(var(--tt-safe-top) + 1.25rem) 1.25rem calc(var(--tt-safe-bottom) + 1.25rem);
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(1px);
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition: opacity 0.4s ease, visibility 0.4s ease;
  --tt-overlay-scale: 0.85;
}
.tt-loading-overlay--visible {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}
.tt-loading-overlay__content {
  width: min(100%, 720px);
  margin-inline: auto;
  padding: 0 1.25rem;
  display: flex;
  justify-content: center;
  align-items: center;
}
.tt-loading-overlay__box {
  width: min(100%, 26rem);
  margin-inline: auto;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.25rem;
}
.tt-loading-overlay__logo {
  width: clamp(180px, 35vw, 360px);
  height: auto;
  max-width: 100%;
  filter:
    drop-shadow(0 0 8px rgba(0, 0, 0, 0.7))
    drop-shadow(0 0 20px rgba(0, 255, 255, 0.4));
  transform: scale(var(--tt-overlay-scale));
}
.tt-loading-overlay--hidden {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

/* === Login scroll intro === */
.tt-login-scroll {
  transform: translateY(0);
  will-change: transform;
}
.tt-login-scroll--intro {
  animation: tt-login-rise 3s cubic-bezier(0.2, 0.95, 0.3, 0.99) forwards;
}

@keyframes tt-login-rise {
  0% {
    transform: translateY(35vh);
  }
  100% {
    transform: translateY(0);
  }
}

@media (prefers-reduced-motion: reduce) {
  .tt-login-scroll--intro {
    animation: none;
    transform: translateY(0) !important;
  }
}

@media (min-width: 520px) {
  .tt-loading-overlay {
    --tt-overlay-scale: 1;
  }
}
@media (min-width: 640px) {
  .tt-loading-overlay__content {
    padding: 0 2rem;
  }
}
@media (min-width: 900px) {
  .tt-loading-overlay {
    --tt-overlay-scale: 1.2;
  }
}

/* === Bubble Transition (Fallback, weil Tailwind v4 Custom-Animationen in der Config ignoriert) === */
@layer utilities {
  @keyframes bubble-rise {
    0% {
      transform: translate3d(-50%, var(--bubble-rise-start, 26dvh), 0) scale(var(--bubble-rise-start-scale, 0.96));
      opacity: 1;
    }
    100% {
      transform: translate3d(-50%, var(--bubble-rise-end, -220dvh), 0) scale(var(--bubble-rise-end-scale, 1.1));
      opacity: 1;
    }
  }
  @keyframes bubble-overlay {
    0% {
      opacity: 1;
    }
    90% {
      opacity: 1;
    }
    100% {
      opacity: 0;
    }
  }
  @keyframes bubble-fade {
    0% {
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      opacity: 0;
    }
  }

  @keyframes tt-bubble-wobble {
    0% {
      transform: translate(-50%, -50%) rotate(var(--schw-rot, 0deg)) scale(var(--schw-scale-min, 0.94));
    }
    48% {
      transform: translate(-50%, -52%) rotate(var(--schw-rot, 0deg)) scale(var(--schw-scale-max, 1.16));
    }
    100% {
      transform: translate(-50%, -50%) rotate(var(--schw-rot, 0deg)) scale(var(--schw-scale-min, 0.94));
    }
  }

  .tt-bubble-wobble {
    animation: tt-bubble-wobble var(--schw-wobble-duration, 1800ms) steps(3, end) infinite;
    animation-direction: alternate;
    animation-delay: var(--schw-wobble-delay, 0s);
    transform-origin: center;
    will-change: transform;
  }

  /* Basisklassen, falls Tailwind die Animation nicht generiert */
  .animate-bubble-rise {
    animation: bubble-rise var(--bubble-rise-duration, 1200ms) linear forwards;
    will-change: transform, opacity;
  }
  .animate-bubble-overlay {
    animation: bubble-overlay var(--bubble-overlay-duration, 1500ms) ease-out forwards;
    will-change: opacity;
  }
  .animate-bubble-fade {
    animation: bubble-fade 900ms ease-in-out forwards;
  }

  .bubble-transition__bubble {
    bottom: var(--bubble-start-bottom, 0dvh);
    transform: translate3d(-50%, var(--bubble-rise-start, 26dvh), 0) scale(var(--bubble-rise-start-scale, 0.96));
    opacity: 0.9;
  }

  /* Achtung auf prefers-reduced-motion – entspricht Tailwinds motion-safe/-reduce */
  .motion-safe\:animate-bubble-rise {
    animation: bubble-rise var(--bubble-rise-duration, 1200ms) linear forwards;
    will-change: transform, opacity;
  }

  @media (prefers-reduced-motion: reduce) {
    .bubble-transition__bubble {
      --bubble-start-bottom: 12dvh;
      --bubble-rise-start: 0dvh;
      --bubble-rise-end: -48dvh;
      transform: translate(-50%, 0) scale(1);
      opacity: 0.8;
      animation-name: bubble-fade;
      animation-duration: min(var(--bubble-overlay-duration, 1500ms), 1100ms);
      animation-timing-function: ease-in-out;
      animation-fill-mode: both;
    }

    .tt-bubble-wobble {
      animation: none !important;
    }

    .motion-safe\:animate-bubble-rise {
      animation: none;
    }

    .motion-reduce\:animate-bubble-fade {
      animation-name: bubble-fade;
      animation-duration: min(var(--bubble-overlay-duration, 1500ms), 1100ms);
      animation-timing-function: ease-in-out;
      animation-fill-mode: both;
    }
  }
}
